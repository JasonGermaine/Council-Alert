
<div class="panel panel-black pageHeader" style="margin-bottom: 35px;">
	<div class="panel-heading">
		<h3 class="panel-title">
			<i class="fa fa-globe"></i> - Tickets
		</h3>
	</div>
</div>

<div class="row" style="margin-bottom: 50px;">
	<div class="btn-group col-lg-12" role="group" aria-label="">
		<button type="button" class="btn btn-default col-lg-3" ng-click="getComplete()">COMPLETE</button>
		<button type="button" class="btn btn-default col-lg-3" ng-click="getAll()">ALL</button>
		<button type="button" class="btn btn-default col-lg-3" ng-click="getToday()">TODAY</button>
		<button type="button" class="btn btn-default col-lg-3" ng-click="getIncomplete()">INCOMPLETE</button>
	</div>
</div>

<div class="row">
	<div class="col-lg-12">
		<div class="table-responsive">
			<div class="col-lg-3" style="margin-bottom: 20px; margin-left: -15px;">
				<input class="form-control" placeholder="Search..."
					ng-model="searchText" />
			</div>
			<table class="table" ts-wrapper>
				<thead>
					<tr>
						<th ts-criteria="id|parseInt" ts-default>ID</th>
						<th ts-criteria="name|lowercase">Name</th>
						<th ts-criteria="citizenId|lowercase">Reporter</th>
						<th ts-criteria="employeeId|lowercase">Assignee</th>
						<th>Complete</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="report in reports | filter:searchText" ts-repeat>
						<td>{{report.id}}</td>
						<td>{{report.name}}</td>
						<td>{{report.citizenId}}</td>
						<td>
							<span ng-if="report.status == false">
								{{report.employeeId}} 
								<span ng-if="!report.employeeId">
										<button
											ng-click="assign(report.id, report.latitude, report.longitude)"
											class="btn btn-custom">
											<i class="fa fa-wrench"></i> Assign
										</button>
								</span>
							</span>
						</td>
						<td>{{report.status}}</td>
						<td><button class="btn btn-custom" ng-click="open(report)">
								<i class="fa fa-comments-o">
							</button></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<script type="text/ng-template" id="displayComments.html">
<div class="modal-header">
	<h3 class="modal-title">{{report.name}}</h3>
</div>
<div class="modal-body">
	<table class="table table-hover table-striped">
		<thead>
			<tr>
				<th>Author</th>
				<th>Comment</th>
				<th>Image</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="entry in report.entries">
				<td>{{entry.comment}}</td>
				<td>{{entry.author}}</td>
				<td>
					<img ng-show="entry.image != null"
								class="col-lg-4 col-md-4 img-responsive"
								src="{{ 'data:image/JPEG;base64,' + entry.image}}"
								style="height: 100px; width: 100px;">
				</td>						
			</tr>
		</tbody>
	</table>
</div>
<div class="modal-footer">
    <button class="btn btn-danger" ng-click="cancel()">Cancel</button>
</div>
</script>
<script type="text/ng-template" id="availableEmp.html">
<div class="modal-header">
	<h3 class="modal-title">Available Employees</h3>
</div>
<div class="modal-body">
	<div class="row">
		<div class="col-lg-12">
			<div class="table-responsive">
				<table class="table table-hover table-striped">
					<thead>
						<tr>
							<th>First Name</th>
							<th>Second Name</th>
							<th>Assign</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="emp in employees">
							<td>{{emp.firstName}}</td>
							<td>{{emp.lastName}}</td>
							<td>
								<button ng-click="assignEmp(emp.email)" class="btn btn-custom"><i class="fa fa-street-view"></i> Assign</button>
							</td>						
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
<div class="modal-footer">
    <button class="btn btn-danger" ng-click="cancel()">Cancel</button>
</div>
</script>